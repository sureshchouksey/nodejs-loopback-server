{"version":3,"sources":["./src/app/pages/chapters/add-chapter/add-chapter-routing.module.ts","./src/app/pages/chapters/add-chapter/add-chapter.component.html","./src/app/pages/chapters/add-chapter/add-chapter.component.ts","./src/app/pages/chapters/add-chapter/add-chapter.module.ts"],"names":[],"mappings":"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","file":"add-chapter.module.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AddChapterComponent } from './add-chapter.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddChapterComponent,\r\n    data: {\r\n      title: 'Add Book'\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AddChapterRoutingModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/chapters/add-chapter/add-chapter-routing.module.ts","module.exports = \"<div class=\\\"overlay\\\" *ngIf=\\\"loading\\\">\\r\\n    <i class=\\\"fa fa-spinner fa-pulse fa-3x fa-fw contCenter\\\"></i> <span class=\\\"sr-only\\\">Loading...</span>\\r\\n</div>\\r\\n<div class=\\\"animated fadeIn\\\" *ngIf=\\\"!loading\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-12\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"backBtn\\\" tabindex=\\\"0\\\" [routerLinkActive]=\\\"['active']\\\" [routerLink]=\\\"['/books/view-book', bookId]\\\"><i class=\\\"fa fa-angle-left\\\" aria-hidden=\\\"true\\\"></i> Back</button>\\r\\n                    <div>\\r\\n                        Add Chapter\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <form #chapters=\\\"ngForm\\\">\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"card-Wrapper\\\">\\r\\n                                <div class=\\\"card-block\\\">\\r\\n                                    <div class=\\\"primaryDetails\\\">\\r\\n                                        <div class=\\\"row\\\">\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"book\\\">Book*</label>\\r\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"book\\\" required name=\\\"book\\\" placeholder=\\\"Enter Book Name\\\" [(ngModel)]=\\\"bookName\\\" #name=\\\"ngModel\\\" readonly maxlength=\\\"50\\\">\\r\\n                                                    <!-- <div class=\\\"error-place\\\">\\r\\n                                                        <div *ngIf=\\\"book.errors && (book.dirty || book.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                            <span *ngIf=\\\"book.errors.required\\\">\\r\\n                                                                Book name is required\\r\\n                                                            </span>\\r\\n                                                            <span *ngIf=\\\"book.errors.pattern\\\">\\r\\n                                                                Please enter a valid book name.\\r\\n                                                            </span>\\r\\n                                                        </div>\\r\\n                                                    </div> -->\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"name\\\">Chapter Name*</label>\\r\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"name\\\" required name=\\\"name\\\" placeholder=\\\"Enter chapter name\\\" [(ngModel)]=\\\"chapterName\\\" #name=\\\"ngModel\\\" maxlength=\\\"50\\\" pattern=\\\"^[^-\\\\s][a-zA-Z0-9 '\\\\s-]+$\\\">\\r\\n                                                    <div class=\\\"error-place\\\">\\r\\n                                                        <div *ngIf=\\\"name.errors && (name.dirty || name.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                            <span *ngIf=\\\"name.errors.required\\\">\\r\\n                                                                Chapter name is required\\r\\n                                                            </span>\\r\\n                                                            <span *ngIf=\\\"name.errors?.pattern\\\">\\r\\n                                                                Please enter valid chapter name\\r\\n                                                            </span>\\r\\n                                                        </div>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"name\\\">Chapter Priority*</label>\\r\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"priority\\\" required name=\\\"priority\\\" placeholder=\\\"Enter chapter priority\\\" [(ngModel)]=\\\"chapterPriority\\\" #priority=\\\"ngModel\\\" maxlength=\\\"4\\\" pattern=\\\"[0-9]*\\\">\\r\\n                                                    <div class=\\\"error-place\\\">\\r\\n                                                        <div *ngIf=\\\"priority.errors && (priority.dirty || priority.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                            <span *ngIf=\\\"priority.errors.required\\\">\\r\\n                                                                Chapter priority is required\\r\\n                                                            </span>\\r\\n                                                            <span *ngIf=\\\"priority.errors.pattern\\\">\\r\\n                                                                Only numbers are allowed.\\r\\n                                                            </span>\\r\\n                                                        </div>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"buttonContainer\\\">\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <button *ngIf=\\\"!loading\\\" class=\\\"btn darkBtn\\\" type=\\\"button\\\" (click)=\\\"submit()\\\">Submit</button>\\r\\n                                    <div class=\\\"loader\\\" *ngIf=\\\"loading\\\"><i class=\\\"fa fa-spinner fa-spin fa-2x fa-fw\\\"></i></div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </form>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"dargPop\\\">\\r\\n    <p-dialog [modal]=\\\"true\\\" (onHide)=\\\"goToListing()\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result == 'success'\\\">\\r\\n        <h6>Chapter Name Added Successfully</h6>\\r\\n    </p-dialog>\\r\\n    <p-dialog header=\\\"New Chapter Added\\\" [modal]=\\\"true\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result != 'success'\\\">\\r\\n        <p>{{result}}</p>\\r\\n    </p-dialog>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/chapters/add-chapter/add-chapter.component.html\n// module id = ./src/app/pages/chapters/add-chapter/add-chapter.component.html\n// module chunks = add-chapter.module","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { NgForm, NgModel, NgControl, FormsModule } from '@angular/forms';\r\nimport { LoopBackAuth, BooksApi, ContainerApi } from '../../../../shared/loopback-sdk';\r\nimport { CookieService } from 'angular2-cookie/core';\r\nimport { Headers, Http, Response } from '@angular/http';\r\nimport { stringify } from 'querystring';\r\nimport { ShareService } from '../../../../providers/share-service/share-service';\r\ndeclare var window: any;\r\ndeclare var hostname: any;\r\ndeclare var sdkPrefix;\r\n@Component({\r\n\ttemplateUrl: 'add-chapter.component.html'\r\n})\r\nexport class AddChapterComponent {\r\n\t@ViewChild('name') name: NgModel;\r\n\t@ViewChild('priority') priority: NgModel;\r\n\tdisplay: boolean = false; result: any;\r\n\tsubmitted: boolean = false;\r\n\tbookName: any;\r\n\tbusy: any;\r\n\tuserDetails: any;\r\n\trolename: any;\r\n\tbookId:any;\r\n\tdescription: any = \"\";\r\n\timage: any;\r\n\timgErrDisplay: boolean = false;\r\n\tloading: boolean = false;\r\n\timgErr: any = '';\r\n\tdata: any;\r\n\tallData: any = [];\r\n\timgName:any;\r\n\tchapterPriority:Number=0;\r\n\tchapterName:any;\r\n\t\r\n\tconstructor(private loopAuth: LoopBackAuth, private route:ActivatedRoute, private http: Http, private _cookieService: CookieService, private books: BooksApi, private router: Router, private containerApi: ContainerApi, private share: ShareService) {\r\n\t\tthis.userDetails = this.loopAuth.getCurrentUserData();\r\n\t\tthis.rolename = this.userDetails.userDet.roles;\r\n\t\tthis.bookId = this.route.snapshot.params['id'];\r\n\t\tthis.initialData();\r\n\t}\r\n\r\n\tinitialData(){\r\n\t\tthis.loading = true;\r\n\t\tvar dataArrObj1 = {\r\n\t\t\t\"id\":this.bookId\r\n\t\t}\r\n\t\tthis.books.getBooks(dataArrObj1, null).subscribe(data=>{\r\n\t\t\tif(data){\r\n\t\t\t\tif(data.result.length > 0){\r\n\t\t\t\t\tvar bookData = data.result[0];\r\n\t\t\t\t\tthis.bookName = bookData.name;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.books.getHighestPriority(\"chapters\", this.bookId).subscribe(data=>{\r\n\t\t\tif(data){\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(data.result.length == 1){\r\n\t\t\t\t\t//console.log(\"priority data\", data);\r\n\t\t\t\t\tlet priorityVal = data.result[0].priority;\r\n\t\t\t\t\tthis.chapterPriority = priorityVal+1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},err=>{\r\n\t\t\tthis.loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\tshowDialog() {\r\n\t\tthis.display = true;\r\n\t}\r\n\r\n\tasync submit() {\r\n\t\tthis.submitted = true;\r\n\t\tif (this.name.valid && this.priority.valid) {\r\n\t\t\t//function call to change base64 format data to Image\r\n\t\t\tvar dataArrObj = {\r\n\t\t\t\t\"name\": this.chapterName,\r\n\t\t\t\t\"book_id\":this.bookId,\r\n\t\t\t\t\"priority\": this.chapterPriority\r\n\t\t\t}\r\n\t\t\tthis.loading=true;\r\n\t\t\tthis.books.addEditChapters(dataArrObj, null).subscribe(\r\n\t\t\t\tdata=>{\r\n\t\t\t\t\tthis.loading=false;\r\n\t\t\t\t\tif(data){\r\n\t\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\t\tif(data.result.id > 0){\r\n\t\t\t\t\t\t\tthis.result = 'success';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.display=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.display=false;\r\n\t\t\t\t\t\tthis.result = 'Something went wrong.';\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terr=>{\r\n\t\t\t\t\t//console.log(\"err\", err);\r\n\t\t\t\t\tthis.loading=false;\r\n\t\t\t\t},\r\n\t\t\t\t()=>{\r\n\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\t\r\n\t}\r\n\r\n\tgoToListing() {\r\n\t\t// window.location.reload();\r\n\t\tthis.router.navigate([\"books/view-book\", this.bookId]);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/chapters/add-chapter/add-chapter.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule }      from '@angular/common';\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { HttpModule } from \"@angular/http\";\r\nimport { AddChapterComponent } from './add-chapter.component';\r\nimport { AddChapterRoutingModule } from './add-chapter-routing.module';\r\nimport { DialogModule } from 'primeng/primeng';\r\nimport {BusyModule} from 'angular2-busy';\r\nimport {EditorModule} from 'primeng/primeng';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, \r\n    FormsModule,\r\n    HttpModule,\r\n    AddChapterRoutingModule,\r\n    DialogModule,\r\n    EditorModule,\r\n\t  BusyModule\r\n  ],\r\n  declarations: [\r\n    AddChapterComponent\r\n  ]\r\n})\r\nexport class AddChapterModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/chapters/add-chapter/add-chapter.module.ts"],"sourceRoot":"webpack:///"}