{"version":3,"sources":["./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage-routing.module.ts","./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.component.html","./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.component.ts","./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.module.ts"],"names":[],"mappings":"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","file":"edit-construction-stage.module.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { EditConstructionStageComponent } from './edit-construction-stage.component';\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditConstructionStageComponent,\r\n    data: {\r\n      title: 'Edit Construction-Stage'\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class EditConstructionStageRoutingModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage-routing.module.ts","module.exports = \"<div class=\\\"overlay\\\" *ngIf=\\\"loading\\\">\\r\\n    <i class=\\\"fa fa-spinner fa-pulse fa-3x fa-fw contCenter\\\"></i> <span class=\\\"sr-only\\\">Loading...</span>\\r\\n</div>\\r\\n<div class=\\\"animated fadeIn\\\" *ngIf=\\\"!loading\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-12\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"backBtn\\\" tabindex=\\\"0\\\" [routerLinkActive]=\\\"['active']\\\" [routerLink]=\\\"['/construction-stage']\\\"><i class=\\\"fa fa-angle-left\\\" aria-hidden=\\\"true\\\"></i> Back</button>\\r\\n                    <div>\\r\\n                        Edit Construction-Stage\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <form #equipmentForm=\\\"ngForm\\\">\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"card-Wrapper\\\">\\r\\n                                <div class=\\\"card-block\\\">\\r\\n                                    <div class=\\\"primaryDetails\\\">\\r\\n                                        <div class=\\\"row\\\">\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"name\\\">Construction-Stage Name*</label>\\r\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"constrctnStgNameId\\\" required name=\\\"constructionStageName\\\" placeholder=\\\"Enter Construction-Stage name\\\" [(ngModel)]=\\\"constructionStageName\\\" #constrctnStgNameId=\\\"ngModel\\\" pattern=\\\"^[^-\\\\s][a-zA-Z - () \\\\/ '\\\\s-]+$\\\"\\r\\n                                                        maxlength=\\\"50\\\">\\r\\n                                                    <div class=\\\"error-place\\\">\\r\\n                                                        <div *ngIf=\\\"constrctnStgNameId.errors && (constrctnStgNameId.dirty || constrctnStgNameId.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                            <span *ngIf=\\\"constrctnStgNameId.errors?.required\\\">\\r\\n                                                                Construction-Stage name is required\\r\\n                                                            </span>\\r\\n                                                            <span *ngIf=\\\"constrctnStgNameId.errors.pattern\\\">\\r\\n                                                                Please enter a valid Construction-Stage name.\\r\\n                                                            </span>\\r\\n                                                        </div>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label>Project Status*</label>\\r\\n                                                    <select name=\\\"constctnStagePrjtType\\\" id=\\\"constctnStagePrjtTypeId\\\" required class=\\\"form-control\\\" [(ngModel)]=\\\"constctnStagePrjtType\\\" #constctnStagePrjtTypeId=\\\"ngModel\\\">\\r\\n                                                        <!--<option value=\\\"all\\\">All</option>-->    \\r\\n                                                        <option value=\\\"upcoming\\\">Early Stage</option>\\r\\n                                                            <option value=\\\"current\\\">Late Stage</option>\\r\\n                                                        </select>\\r\\n                                                    <div *ngIf=\\\"constctnStagePrjtTypeId.errors && (constctnStagePrjtTypeId.dirty || constctnStagePrjtTypeId.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                        <span *ngIf=\\\"constctnStagePrjtTypeId.errors.required\\\" class=\\\"error\\\">\\r\\n                                                            Project status is required\\r\\n                                                            </span>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-3\\\">\\r\\n                                                <div class=\\\"form-group selectAppWrap\\\">\\r\\n                                                    <label for=\\\"status\\\">Construction-Stage Status</label>\\r\\n                                                    <!-- <p-toggleButton name=\\\"contractor_status\\\" [(ngModel)]=\\\"contractor_status\\\" #contractorStatusid=\\\"ngModel\\\" onLabel=\\\"Active\\\" offLabel=\\\"Inactive\\\" onIcon=\\\"fa-check-square\\\" offIcon=\\\"fa-square\\\" [style]=\\\"{'width':'150px'}\\\" (onChange)=\\\"contractorStatusChanged($event)\\\"></p-toggleButton> -->\\r\\n                                                    <div class=\\\"selectRadio\\\">\\r\\n                                                        <div class=\\\"radio\\\">\\r\\n                                                            <label><input type=\\\"radio\\\" [value]=\\\"true\\\"  name=\\\"constStgStatus\\\" [(ngModel)]=\\\"constStgStatus\\\">Active</label>\\r\\n                                                        </div>\\r\\n                                                        <div class=\\\"radio\\\" *ngIf=\\\"!projectCount > 0\\\">\\r\\n                                                            <label><input type=\\\"radio\\\" [value]=\\\"false\\\" name=\\\"constStgStatus\\\" [(ngModel)]=\\\"constStgStatus\\\">Inactive</label>\\r\\n                                                        </div>\\r\\n                                                        <p *ngIf=\\\"projectCount > 0\\\">\\r\\n                                                            Construction-Stage is already been used so it cannot be inactive\\r\\n                                                        </p>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"buttonContainer\\\">\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <button *ngIf=\\\"!loading\\\" class=\\\"btn darkBtn\\\" type=\\\"button\\\" (click)=\\\"submit(equipmentForm)\\\">Submit</button>\\r\\n                                    <div class=\\\"loader\\\" *ngIf=\\\"loading\\\"><i class=\\\"fa fa-spinner fa-spin fa-2x fa-fw\\\"></i></div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </form>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"dargPop\\\">\\r\\n    <p-dialog [modal]=\\\"true\\\" (onHide)=\\\"goToListing()\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result == 'success'\\\">\\r\\n        <h6>Construction-Stage Updated Successfully</h6>\\r\\n    </p-dialog>\\r\\n    <p-dialog header=\\\"Construction-Stage Updated\\\" [modal]=\\\"true\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result != 'success'\\\">\\r\\n        <p>{{result}}</p>\\r\\n    </p-dialog>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.component.html\n// module id = ./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.component.html\n// module chunks = edit-construction-stage.module","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { NgForm, NgModel, NgControl, FormsModule } from '@angular/forms';\r\nimport { LoopBackAuth, BooksApi, ContainerApi, CityApi, Construction_stage_masterApi } from '../../../../shared/loopback-sdk';\r\nimport { CookieService } from 'angular2-cookie/core';\r\nimport { Headers, Http, Response } from '@angular/http';\r\nimport { stringify } from 'querystring';\r\nimport { ShareService } from '../../../../providers/share-service/share-service';\r\ndeclare var window: any;\r\ndeclare var hostname: any;\r\ndeclare var sdkPrefix;\r\n@Component({\r\n\ttemplateUrl: 'edit-construction-stage.component.html'\r\n})\r\nexport class EditConstructionStageComponent {\r\n\tpublic id: number;\r\n\tdisplay: boolean = false; result: any;\r\n\tsubmitted: boolean = false;\r\n\tconstructionStageName: any;\r\n\tbusy: any;\r\n\tuserDetails: any;\r\n\trolename: any;\r\n\tloading: boolean = false;\r\n\tconstStgStatus:boolean = false;\r\n\tconstctnStagePrjtType:string='';\r\n\tbookImage:any;\r\n\tloginFlagToken:any;\r\n\tprojectCount : number = 0;\r\n\tmunicipalityCount : number = 0;\r\n\tconstruction_stage_id : number = 0;\r\n\tequipmentPreviousStatus : boolean = false;\r\n\t\r\n\r\n\teditConstnStg={\r\n\t\t\"construction_stage_id\":0,\r\n\t\t\"construction_stage_name\":\"\",\r\n\t\t\"project_status\":\"\",\r\n\t\t\"status\": 0,\r\n\t\t//\"updated_date\":0\r\n\t}\r\n\tconstructor(private loopAuth: LoopBackAuth, private route: ActivatedRoute, private http: Http, private _cookieService: CookieService, private books: BooksApi, private router: Router, private containerApi: ContainerApi, private share: ShareService, private cityApi:CityApi,private constStgApi:Construction_stage_masterApi) {\r\n\t\tthis.userDetails = this.loopAuth.getCurrentUserData();\r\n\t\tthis.rolename = this.userDetails.userDet.roles;\r\n\t\tthis.id = this.route.snapshot.params['id'];\r\n\t\tthis.loginFlagToken = this._cookieService.get(sdkPrefix+'id');\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.loading = true;\r\n\t\tvar dataArrObj = {\r\n\t\t\t\"construction_stage_id\":this.id\r\n\t\t}\r\n\t\tthis.constStgApi.getConstructionStage(dataArrObj).subscribe(data=>{\r\n\t\t\t\r\n\t\t\tif(data){\r\n\t\t\t\tlet result = data.result[0];\r\n\t\t\t\tthis.construction_stage_id = result.construction_stage_id;\r\n\t\t\t\tthis.constructionStageName = result.construction_stage_name;\r\n\t\t\t\tthis.constctnStagePrjtType = result.project_status;\r\n\t\t\t\tthis.constStgStatus = (result.status)?true:false;\r\n\t\t\t\tthis.projectCount = result.usedProjects;\r\n\t\t\t\t//console.log(\"projectCount \",this.projectCount);\r\n\t\t\t\tthis.editConstnStg={\r\n\t\t\t\t\t\"construction_stage_id\":result.construction_stage_id,\r\n\t\t\t\t\t\"project_status\":result.project_status,\r\n\t\t\t\t\t\"construction_stage_name\": result.construction_stage_name,\r\n\t\t\t\t\t\"status\": result.status,\r\n\t\t\t\t\t//\"updated_date\":result.updated_date\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\t\t\tthis.loading = false;\r\n\t\t},\r\n\t\terr=>{\r\n\t\t\t//console.log(\"err\", err);\r\n\t\t\tthis.loading = false;\r\n\t\t},\r\n\t\t()=>{\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tgoToListing() {\r\n\t\t// window.location.reload();\r\n\t\tthis.router.navigate([\"construction-stage\"]);\r\n\t}\r\n\r\n\tasync submit(constrctnStgForm) {\r\n\t\tthis.submitted = true;\r\n\t\tif (constrctnStgForm.valid) {\r\n\t\t\tthis.loading = true;\r\n\r\n\t\t\tlet date = new Date();\r\n\t\t\tlet currentdate = date.getTime();\r\n\r\n\t\t\tthis.editConstnStg.construction_stage_id = this.construction_stage_id;\r\n\t\t\tthis.editConstnStg.construction_stage_name = this.capital_letter(this.constructionStageName);\r\n\t\t\tthis.editConstnStg.project_status = this.constctnStagePrjtType;\r\n\t\t\tthis.editConstnStg.status = (this.constStgStatus)?1:0;\r\n\t\t\t//this.editConstnStg.updated_date = currentdate;\r\n\r\n\t\t\t\r\n\r\n\t\t\t//updating equipments-master\r\n\t\t\r\n\t\t\t// this.ifNameExist(this.editConstnStg).then((total)=>{\r\n\t\t\t// \tif(total > 0){\r\n\t\t\t// \t\tthis.loading = false;\r\n\t\t\t// \t\tthis.result = \"Equipment name already exist\";\r\n\t\t\t// \t\tthis.display = true;\r\n\t\t\t// \t}else{\r\n\t\t\t// \t\tconsole.log(\"this.editConstnStg \",this.editConstnStg);\r\n\t\t\tthis.checkCount(this.editConstnStg).then((total)=>{\r\n\t\t\t\tif(total > 0 && !this.editConstnStg.status){\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tthis.result = \"Construction-Stage is already been used so it cannot be inactive\";\r\n\t\t\t\t\tthis.display = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.constStgApi.upsertPatch(this.editConstnStg).subscribe((data)=>{\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.result = \"success\";\r\n\t\t\t\t\t\tthis.display = true;\r\n\t\t\t\t\t},(err)=>{\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.result = \"Something went wrong\";\r\n\t\t\t\t\t\tthis.display = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},(err)=>{\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.result = \"Something went wrong\";\r\n\t\t\t\tthis.display = true;\r\n\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t// \t}\r\n\t\t\t// },(err)=>{\r\n\t\t\t// \tthis.loading = false;\r\n\t\t\t// \tthis.result = \"Something went wrong\";\r\n\t\t\t// \tthis.display = true;\r\n\t\t\t// });\r\n\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tifNameExist(dataObj){\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\ttry{\r\n\t\t\t\tlet access_token = this.loopAuth.getAccessTokenId();\r\n\t\t\t\tlet constrctStgNameString : string = dataObj.construction_stage_name;\r\n\t\t\t\tlet constrctStgPrjtTypString : string = dataObj.project_status;\r\n\t\t\t\tlet cond = { \"construction_stage_name\": constrctStgNameString.toString(),\"project_status\":constrctStgPrjtTypString};\r\n\t\t\t\tlet api=\"/api/construction_stage_masters/count?where=\";\r\n\t\t\t\t\r\n\t\t\t\tlet url = hostname+api+encodeURI(JSON.stringify(cond))+\"&access_token=\"+access_token;\r\n\t\t\t\tthis.http.get(url).subscribe((data)=>{\r\n\t\t\t\t\t//console.log(\"Count \",data.json());\r\n\t\t\t\t\tresolve(data.json().count);\r\n\t\t\t\t},(err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}catch(err){\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\tcheckCount(dataObj){\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\ttry{\r\n\t\t\t\tlet access_token = this.loopAuth.getAccessTokenId();\r\n\t\t\t\tlet constrctStgId = dataObj.construction_stage_id;\r\n\t\t\t\tlet cond = { \"construction_stage_id\": constrctStgId};\r\n\t\t\t\t\r\n\t\t\t\tlet api=\"/api/construction_stage_mappings/count?where=\";\r\n\t\t\t\t\r\n\t\t\t\tlet url = hostname+api+encodeURI(JSON.stringify(cond))+\"&access_token=\"+access_token;\r\n\t\t\t\tthis.http.get(url).subscribe((data)=>{\r\n\t\t\t\t\t//console.log(\"Count \",data.json());\r\n\t\t\t\t\tresolve(data.json().count);\r\n\t\t\t\t},(err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tcatch(err){\r\n\t\t\t\treject(true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcapital_letter(str) \r\n\t{\r\n\t\tif(str != '' && str != null && str != undefined){\r\n\t\t\tstr = str.split(\" \");\r\n\r\n\t\t\tfor (var i = 0, x = str.length; i < x; i++) {\r\n\t\t\t\tstr[i] = str[i][0].toUpperCase() + str[i].substr(1);\r\n\t\t\t}\r\n\t\r\n\t\t\treturn str.join(\" \");\r\n\t\t}else{\r\n\t\t\treturn str\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { HttpModule } from \"@angular/http\";\r\nimport { EditConstructionStageComponent } from './edit-construction-stage.component';\r\nimport { EditConstructionStageRoutingModule} from './edit-construction-stage-routing.module';\r\nimport { DialogModule } from 'primeng/primeng';\r\nimport {BusyModule} from 'angular2-busy';\r\nimport {EditorModule} from 'primeng/primeng';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, \r\n    FormsModule,\r\n    HttpModule,\r\n    EditConstructionStageRoutingModule,\r\n    DialogModule,\r\n    EditorModule,\r\n\t  BusyModule\r\n  ],\r\n  declarations: [\r\n    EditConstructionStageComponent\r\n  ]\r\n})\r\nexport class EditConstructionStageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/construction-stage/edit-construction-stage/edit-construction-stage.module.ts"],"sourceRoot":"webpack:///"}