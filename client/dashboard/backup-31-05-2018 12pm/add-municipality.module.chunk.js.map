{"version":3,"sources":["./src/app/pages/municipality/add-municipality/add-municipality-routing.module.ts","./src/app/pages/municipality/add-municipality/add-municipality.component.html","./src/app/pages/municipality/add-municipality/add-municipality.component.ts","./src/app/pages/municipality/add-municipality/add-municipality.module.ts"],"names":[],"mappings":"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","file":"add-municipality.module.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AddMunicipalityComponent } from './add-municipality.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddMunicipalityComponent,\r\n    data: {\r\n      title: 'Add Municipality'\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class MunicipalityCrudRoutingModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/municipality/add-municipality/add-municipality-routing.module.ts","module.exports = \"<div class=\\\"overlay\\\" *ngIf=\\\"loading\\\">\\r\\n    <i class=\\\"fa fa-spinner fa-pulse fa-3x fa-fw contCenter\\\"></i> <span class=\\\"sr-only\\\">Loading...</span>\\r\\n</div>\\r\\n<div class=\\\"animated fadeIn\\\" *ngIf=\\\"!loading\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-lg-12\\\">\\r\\n            <div class=\\\"card\\\">\\r\\n                <div class=\\\"card-header\\\">\\r\\n                    <button type=\\\"button\\\" class=\\\"backBtn\\\" tabindex=\\\"0\\\" [routerLinkActive]=\\\"['active']\\\" [routerLink]=\\\"['/municipality']\\\"><i class=\\\"fa fa-angle-left\\\" aria-hidden=\\\"true\\\"></i> Back</button>\\r\\n                    <div>\\r\\n                        Add Municipality\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <form #municipality=\\\"ngForm\\\">\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"card-Wrapper\\\">\\r\\n                                <div class=\\\"card-block\\\">\\r\\n                                    <div class=\\\"primaryDetails\\\">\\r\\n                                        <div class=\\\"row\\\">\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"name\\\">Municipality Name*</label>\\r\\n                                                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"municipalityNameId\\\" required name=\\\"municipalityName\\\" placeholder=\\\"Enter municipality name\\\" [(ngModel)]=\\\"municipalityName\\\" #municipalityNameId=\\\"ngModel\\\" pattern=\\\"^[^-\\\\s][a-zA-Z '\\\\s-]+$\\\">\\r\\n                                                    <div class=\\\"error-place\\\" maxlength=\\\"50\\\">\\r\\n                                                        <div *ngIf=\\\"municipalityNameId.errors && (municipalityNameId.dirty || municipalityNameId.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                            <span *ngIf=\\\"municipalityNameId.errors.required\\\">\\r\\n                                                                Municipality name is required\\r\\n                                                            </span>\\r\\n                                                            <span *ngIf=\\\"municipalityNameId.errors.pattern\\\">\\r\\n                                                                Please enter a valid municipality name.\\r\\n                                                            </span>\\r\\n                                                        </div>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-4\\\">\\r\\n                                                <div class=\\\"form-group\\\">\\r\\n                                                    <label for=\\\"name\\\">Province Name*</label>\\r\\n                                                    <select class=\\\"form-control\\\" id=\\\"cityNameId\\\" required name=\\\"cityName\\\" [(ngModel)]=\\\"cityName\\\" #cityNameId=\\\"ngModel\\\">\\r\\n                                                        <option *ngFor=\\\"let item of cityNameData\\\"  [value]=\\\"item.city_id\\\">{{item.city_name}}</option>\\r\\n                                                    </select>\\r\\n                                                    <div *ngIf=\\\"cityNameId.errors && (cityNameId.dirty || cityNameId.touched || submitted)\\\" class=\\\"error\\\">\\r\\n                                                        <span *ngIf=\\\"cityNameId.errors.required\\\">\\r\\n                                                            Province name is required\\r\\n                                                        </span>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-md-3\\\">\\r\\n                                                <div class=\\\"form-group selectAppWrap\\\">\\r\\n                                                    <label for=\\\"status\\\">Municipality Status</label>\\r\\n                                                    <!-- <p-toggleButton name=\\\"contractor_status\\\" [(ngModel)]=\\\"contractor_status\\\" #contractorStatusid=\\\"ngModel\\\" onLabel=\\\"Active\\\" offLabel=\\\"Inactive\\\" onIcon=\\\"fa-check-square\\\" offIcon=\\\"fa-square\\\" [style]=\\\"{'width':'150px'}\\\" (onChange)=\\\"contractorStatusChanged($event)\\\"></p-toggleButton> -->\\r\\n                                                    <div class=\\\"selectRadio\\\">\\r\\n                                                        <div class=\\\"radio\\\">\\r\\n                                                            <label><input type=\\\"radio\\\" [value]=\\\"true\\\"  name=\\\"municipalityStatus\\\" [(ngModel)]=\\\"municipalityStatus\\\">Active</label>\\r\\n                                                        </div>\\r\\n                                                        <div class=\\\"radio\\\">\\r\\n                                                            <label><input type=\\\"radio\\\" [value]=\\\"false\\\" name=\\\"municipalityStatus\\\" [(ngModel)]=\\\"municipalityStatus\\\">Inactive</label>\\r\\n                                                        </div>\\r\\n                                                    </div>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"buttonContainer\\\">\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <button *ngIf=\\\"!loading\\\" class=\\\"btn darkBtn\\\" type=\\\"submit\\\" (click)=\\\"submit(municipality)\\\">Submit</button>\\r\\n                                    <div class=\\\"loader\\\" *ngIf=\\\"loading\\\"><i class=\\\"fa fa-spinner fa-spin fa-2x fa-fw\\\"></i></div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </form>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"dargPop\\\">\\r\\n    <p-dialog [modal]=\\\"true\\\" (onHide)=\\\"goToListing()\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result == 'success'\\\">\\r\\n        <h6>Municipality Added Successfully</h6>\\r\\n    </p-dialog>\\r\\n    <p-dialog header=\\\"Municipality\\\" [modal]=\\\"true\\\" [(visible)]=\\\"display\\\" *ngIf=\\\"result != 'success'\\\">\\r\\n        <p>{{result}}</p>\\r\\n    </p-dialog>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/pages/municipality/add-municipality/add-municipality.component.html\n// module id = ./src/app/pages/municipality/add-municipality/add-municipality.component.html\n// module chunks = add-municipality.module","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { NgForm, NgModel, NgControl, FormsModule } from '@angular/forms';\r\nimport { LoopBackAuth, BooksApi, ContainerApi ,CityApi,MunicipalityApi} from '../../../../shared/loopback-sdk';\r\nimport { CookieService } from 'angular2-cookie/core';\r\nimport { Headers, Http, Response } from '@angular/http';\r\nimport { stringify } from 'querystring';\r\nimport { ShareService } from '../../../../providers/share-service/share-service';\r\nimport { promise } from 'protractor';\r\n\r\n\r\ndeclare var window: any;\r\ndeclare var hostname: any;\r\ndeclare var sdkPrefix;\r\n@Component({\r\n\ttemplateUrl: 'add-municipality.component.html'\r\n})\r\nexport class AddMunicipalityComponent {\r\n\t@ViewChild('provinceName') name: NgModel;\r\n\tdisplay: boolean = false; result: any;\r\n\tsubmitted: boolean = false;\r\n\tprovinceName: any;\r\n\tbusy: any;\r\n\tuserDetails: any;\r\n\trolename: any;\r\n\tloading: boolean = false;\r\n\tdata: any;\r\n\tperPageLimit:number = 10;\r\n\toffset:number=0;\r\n\ttotal:number;\r\n\tcityNameData = [];\r\n\tcityName:0;\r\n\tmunicipalityName:string;\r\n\tmunicipalityStatus= false;\r\n\r\n\tconstructor(private loopAuth: LoopBackAuth, private http: Http, private _cookieService: CookieService, private books: BooksApi, private router: Router, private containerApi: ContainerApi, private share: ShareService,private cityApi:CityApi,private municipalityApi : MunicipalityApi) {\r\n\t\tthis.userDetails = this.loopAuth.getCurrentUserData();\r\n\t\t\r\n\t\tthis.rolename = this.userDetails.userDet.roles;\r\n\t}\r\n\r\n\r\n\tasync submit(form) {\r\n\t\tthis.submitted = true;\r\n\t\tlet validFlag = true;\r\n\t\tif (form.valid) {\r\n\r\n\t\t\t//function call to change base64 format data to Image\r\n\t\t\tvar dataArrObj = {\r\n\t\t\t\t\"city_name\": this.provinceName,\r\n\t\t\t\t\"status\": false\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"form\",form);\r\n\t\t\tif(form.value.cityName){\r\n\t\t\t\tlet city_name = this.cityNameData;\r\n\t\t\t\tfor (const key in this.cityNameData) {\r\n\t\t\t\t\tif(this.cityNameData[key].city_id == form.value.cityName){\r\n\t\t\t\t\t\tcity_name = this.cityNameData[key].city_name;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar dataObj = {\r\n\t\t\t\t\tname:this.capital_letter(this.municipalityName),\r\n\t\t\t\t\tcity_id:form.value.cityName,\r\n\t\t\t\t\tcity_name:city_name,\r\n\t\t\t\t\tstatus:this.municipalityStatus\r\n\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet totalCount;\r\n\t\t\t\tthis.ifNameExist(dataObj).then((count)=>{\r\n\t\t\t\t\ttotalCount = count;\r\n\t\t\t\t\tconsole.log(totalCount);\r\n\t\t\t\t\tif(totalCount > 0){\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.display=true;\r\n\t\t\t\t\t\tthis.result = 'Municipality name already exist.';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.municipalityApi.upsert(dataObj).subscribe((data)=>{\r\n\t\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\tthis.display=true;\r\n\t\t\t\t\t\t\t\t\tthis.result = 'success';\r\n\t\t\t\t\t\t},(err)=>{\r\n\t\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\tthis.display=true;\r\n\t\t\t\t\t\t\t\t\tthis.result = 'Something went wrong.';\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},(err)=>{\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\t\tthis.display=true;\r\n\t\t\t\t\t\t\t\t\tthis.result = 'Something went wrong.';\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tifNameExist(dataObj){\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\ttry{\r\n\t\t\t\tlet access_token = this.loopAuth.getAccessTokenId();\r\n\t\t\t\tlet api=\"/api/municipalities/count?where=\";\r\n\t\t\t\tlet cond = { \"name\": dataObj.name};\r\n\t\t\t\tlet url = hostname+api+encodeURI(JSON.stringify(cond))+\"&access_token=\"+access_token;\r\n\t\t\t\tthis.http.get(url).subscribe((data)=>{\r\n\t\t\t\t\tconsole.log(\"Count \",data.json());\r\n\t\t\t\t\tresolve(data.json().count);\r\n\t\t\t\t},(err)=>{\r\n\t\t\t\t\treject(err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}catch(err){\r\n\t\t\t\treject(err);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.loading = true;\r\n\t\tthis.getCity().then((data)=>{\r\n\t\t\tthis.loading = false;\r\n\t\t},(err)=>{\r\n\t\t\tthis.loading = true;\r\n\t\t});\r\n\t}\r\n\r\n\tgetCity(){\r\n\t\t\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\ttry{\r\n\r\n\t\t\t\tthis.cityApi.find().subscribe(\r\n\t\t\t\t\t(data:any)=>{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.cityNameData = [];\r\n\t\t\t\t\t\tthis.cityNameData = data;\r\n\t\t\t\t\t\tresolve(this.cityNameData);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terr=>{\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.display=false;\r\n\t\t\t\t\t\t\tthis.result = 'Something went wrong.';\r\n\t\t\t\t\t\treject(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}catch(err){\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tthis.display=false;\r\n\t\t\t\t\t\t\tthis.result = 'Something went wrong.';\r\n\t\t\t\treject(true);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\t\r\n\t}\r\n\r\n\tcapital_letter(str) \r\n\t{\r\n\t\tstr = str.split(\" \");\r\n\r\n\t\tfor (var i = 0, x = str.length; i < x; i++) {\r\n\t\t\tstr[i] = str[i][0].toUpperCase() + str[i].substr(1);\r\n\t\t}\r\n\r\n\t\treturn str.join(\" \");\r\n\t}\r\n\r\n\tgoToListing() {\r\n\t\t// window.location.reload();\r\n\t\tthis.router.navigate([\"municipality\"]);\r\n\t}\r\n\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/municipality/add-municipality/add-municipality.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule }      from '@angular/common';\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { HttpModule } from \"@angular/http\";\r\nimport { AddMunicipalityComponent } from './add-municipality.component';\r\nimport { MunicipalityCrudRoutingModule } from './add-municipality-routing.module';\r\nimport { DialogModule } from 'primeng/primeng';\r\nimport {BusyModule} from 'angular2-busy';\r\nimport {EditorModule} from 'primeng/primeng';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, \r\n    FormsModule,\r\n    HttpModule,\r\n    MunicipalityCrudRoutingModule,\r\n    DialogModule,\r\n    EditorModule,\r\n    BusyModule\r\n  ],\r\n  declarations: [\r\n    AddMunicipalityComponent\r\n  ]\r\n})\r\nexport class AddMunicipalityModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pages/municipality/add-municipality/add-municipality.module.ts"],"sourceRoot":"webpack:///"}